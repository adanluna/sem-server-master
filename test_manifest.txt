curl -X POST http://127.0.0.1:8000/investigaciones/ \
  -H "Content-Type: application/json" \
  -d '{
    "numero_expediente": "INV-TEST-001",
    "nombre_carpeta": "INV-TEST-001",
    "observaciones": "Prueba de integración"
}'

docker compose build celery_manifest
docker compose build celery_uniones
docker compose build celery_video2
docker compose build fastapi
docker compose up -d

docker logs -f celery_manifest
docker logs celery_uniones -f
docker compose logs celery_video2 -f
docker compose logs fastapi -f

curl -X POST http://localhost:8000/whisper/enviar \
  -H "Content-Type: application/json" \
  -d '{"sesion_id": 1, "expediente": "INV-TEST-001"}'

curl -X POST http://127.0.0.1:8000/procesar_sesion \
  -H "Content-Type: application/json" \
  -d '{
    "sesion_activa": {
      "id_sesion": 1,
      "expediente": "INV-TEST-001",
      "nombre": "Autopsia_Prueba_Manifest_Corta",
      "inicio": "2025-12-04T13:00:00",
      "fin": "2025-12-04T13:05:00",
      "estado": "grabando",
      "duracion_total": "00:05:00",

      "pausas": [
        {
          "inicio": "2025-12-04T13:00:00",
          "fin": "2025-12-04T13:01:00"
        },
        {
          "inicio": "2025-12-04T13:04:00",
          "fin": "2025-12-04T13:05:00"
        }
      ],

      "forense": {
        "id_usuario": "adrian.morales@semefo.local",
        "nombre": "Adrián Morales"
      },

      "forense_cerrar": {
        "id_usuario": "adrian.morales@semefo.local",
        "nombre": "Adrián Morales",
        "fecha": "2025-12-04T13:05:00"
      },

      "tablet": "tablet_forense_01",
      "plancha": "plancha_03",

      "camara1_mac_address": "E4-30-22-A0-85-6F",
      "camara2_mac_address": "713119e0e7660334da119e4d7e5c6b57",

      "version_app": "1.0.0",
      "ultima_actualizacion": "2025-12-04T13:05:00"
    }
  }'

